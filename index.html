<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shared Chat</title>
<style>
body{font-family:sans-serif;margin:0;display:flex;flex-direction:column;height:100vh;}
#chat{flex:1;overflow:auto;padding:10px;background:#f2f2f2;}
.msg{background:white;margin:5px 0;padding:8px;border-radius:10px;}
#inputArea{display:flex;padding:10px;background:#ddd;}
input{flex:1;padding:8px;}
button{padding:8px;}
</style>
</head>
<body>

<div id="chat"></div>

<div id="inputArea">
<input id="text" placeholder="メッセージ">
<button onclick="send()">送信</button>
</div>

<script>
const repoURL = "https://raw.githubusercontent.com/はるき/chat/main/messages.json";

async function loadMessages(){
  const res = await fetch(repoURL + "?t=" + Date.now());
  const data = await res.json();
  render(data);
}

function render(messages){
  const chat = document.getElementById("chat");
  chat.innerHTML="";
  messages.forEach(m=>{
    const div=document.createElement("div");
    div.className="msg";
    div.textContent=m;
    chat.appendChild(div);
  });
}

async function send(){
  alert("この方式では書き込みはできません（読み取り専用）");
}

setInterval(loadMessages, 2000);
loadMessages();
</script>

</body>
</html>
