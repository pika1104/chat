<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MyChat Service</title>
<style>
body{
  margin:0;
  font-family:sans-serif;
  display:flex;
  height:100vh;
  background:#f0f2f5;
}
#sidebar{
  width:250px;
  background:#111;
  color:white;
  display:flex;
  flex-direction:column;
}
#sidebar h2{
  text-align:center;
}
#groups{
  flex:1;
  overflow:auto;
}
.group{
  padding:10px;
  cursor:pointer;
}
.group:hover{
  background:#333;
}
#main{
  flex:1;
  display:flex;
  flex-direction:column;
}
#chat{
  flex:1;
  overflow:auto;
  padding:15px;
}
.message{
  margin:5px 0;
  padding:8px 12px;
  border-radius:10px;
  max-width:60%;
}
.me{
  background:#06c755;
  color:white;
  align-self:flex-end;
}
.other{
  background:#ddd;
}
#inputArea{
  display:flex;
  padding:10px;
  background:#ccc;
}
input{
  flex:1;
  padding:8px;
}
button{
  padding:8px;
}
.dark{
  background:#1e1e1e;
  color:white;
}
</style>
</head>
<body>

<div id="sidebar">
  <h2>MyChat</h2>
  <div id="userInfo"></div>
  <div id="groups"></div>
  <button onclick="createGroup()">Ôºã„Ç∞„É´„Éº„Éó</button>
  <button onclick="toggleDark()">üåô</button>
</div>

<div id="main">
  <div id="chat"></div>
  <div id="inputArea">
    <input id="text" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏">
    <button onclick="send()">ÈÄÅ‰ø°</button>
  </div>
</div>

<script>
let currentUser = localStorage.getItem("user");
let groups = JSON.parse(localStorage.getItem("groups")) || {};
let currentGroup = null;

if(!currentUser){
  currentUser = prompt("„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ");
  localStorage.setItem("user", currentUser);
}

document.getElementById("userInfo").innerText = "üë§ " + currentUser;

function save(){
  localStorage.setItem("groups", JSON.stringify(groups));
}

function renderGroups(){
  const g = document.getElementById("groups");
  g.innerHTML="";
  Object.keys(groups).forEach(name=>{
    const div=document.createElement("div");
    div.className="group";
    div.innerText=name;
    div.onclick=()=>openGroup(name);
    g.appendChild(div);
  });
}

function createGroup(){
  const name = prompt("„Ç∞„É´„Éº„ÉóÂêç");
  if(!name) return;
  groups[name]=[];
  save();
  renderGroups();
}

function openGroup(name){
  currentGroup=name;
  renderChat();
}

function renderChat(){
  const chat=document.getElementById("chat");
  chat.innerHTML="";
  if(!currentGroup) return;
  groups[currentGroup].forEach(m=>{
    const div=document.createElement("div");
    div.className="message "+(m.user===currentUser?"me":"other");
    div.innerText=m.user+": "+m.text;
    chat.appendChild(div);
  });
}

function send(){
  if(!currentGroup) return;
  const text=document.getElementById("text").value;
  if(!text) return;
  groups[currentGroup].push({
    user:currentUser,
    text:text,
    read:false
  });
  save();
  renderChat();
  document.getElementById("text").value="";
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

renderGroups();
</script>

</body>
</html>
